jobs:
- name: deploySingleLib
  job:
    deploy:
      contract: single-lib.sol
      instance: Search
      wait: true

- name: deployConsumingContract
  job:
    deploy:
      contract: consuming-contract.sol
      instance: C
      libraries: Search:$deploySingleLib
      wait: true

- name: appendValue1
  job:
    call:
      destination: $deployConsumingContract
      function: append
      data:
        - 1
      wait: true

- name: appendValue2
  job:
    call:
      destination: $deployConsumingContract
      function: append
      data:
        - 2
      wait: true

- name: appendValue3
  job:
    call:
      destination: $deployConsumingContract
      function: append
      data:
        - 3
      wait: true

- name: queryFirstCell
  job:
    query-contract:
      destination: $deployConsumingContract
      function: getDataAtIndex
      data:
        - 0
      wait: true

- name: assertProperIndex
  job:
    assert:
      key: $queryFirstCell
      relation: eq
      val: 1

- name: testSingleLib
  job:
    call:
      destination: $deployConsumingContract
      function: replace
      data: 
        - 3
        - 5
      wait: true

- name: queryTestSingleLib
  job:
    query-contract:
      destination: $deployConsumingContract
      function: getDataAtIndex
      data: 
        - 2
      wait: true

- name: assertIndexChanged
  job:
    assert:
      key: $queryTestSingleLib
      relation: eq
      val: 5


- name: deployBasicMath
  job:
    deploy:
      contract: multi-lib.sol
      instance: basicMath
      wait: true

- name: deployIntStructs
  job:
    deploy:
      contract: multi-lib.sol
      instance: intStructs
      wait: true

- name: deployMultiConsumer
  job:
    deploy:
      contract: multi-lib-consumer.sol
      libraries: basicMath:$deployBasicMath,intStructs:$deployIntStructs
      wait: true

